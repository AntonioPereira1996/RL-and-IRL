#+TITLE: Cascading IRL on the Highway

On compare les performences des différentes configurations de notre algo : 
 - Features naturelles (N) ou features informatives (I)
 - Utilisation de $a'_i$ (E) ou de $\pi_C(s')$ (C)

Soit 4 combinaisons en tout : NE, NC, IE et IC. Un seul script qui prend en argument le fichier de données et affiche le nombre de samples et les performances sur la sortie standard, sur une seule ligne, séparés par des tabulations. Dans l'ordre : NE, NC, IE et IC. 
* With true features
#+begin_src python :tangle Cascading_Exp1.py
import sys
sys.path+=['..']
from numpy import *
import scipy
import Cascading
import Highway

D_E = genfromtxt( sys.argv[1] )
Data = map( lambda trans: [trans[0:4],trans[4:5][0],trans[5:9],trans[10:11][0]], D_E ) #s,a,s',eoe 
theta_NE,theta_NC = Cascading.run( Data, Highway.psi, Highway.phi, Highway.A )
theta_IE,theta_IC = Cascading.run( Data, Highway.psi2, Highway.phi2, Highway.A )

perf_NE = Highway.evaluate_theta( theta_NE, Highway.psi )
perf_NC = Highway.evaluate_theta( theta_NC, Highway.psi )
perf_IE = Highway.evaluate_theta( theta_IE, Highway.psi2 )
perf_IC = Highway.evaluate_theta( theta_IC, Highway.psi2 )

print "%d\t%lf\t%lf\t%lf\t%lf"%(D_E.shape[0], perf_NE, perf_NC, perf_IE, perf_IC )

#+end_src

#+srcname: Cascading_Exp1_make
#+begin_src makefile
Cascading_Exp1.py: Cascading_Exp1.org
	$(call tangle,"Cascading_Exp1.org")

LM_VALUES="3 3" "10 10"
Cascading_Exp1: Cascading_Exp1.py Highway.py ../DP.py Mu_E.mat ../Cascading.py ../LAFEM.py DE.py ../a2str.py
	for i in $(LM_VALUES); \
	do \
	python DE.py $$i > DE.mat; \
	python Cascading_Exp1.py DE.mat >> Cascading_Exp1.mat; \
	done


../Cascading.py:
	make -C .. Cascading.py

#+end_src


* Stuff
  #+srcname: Cascading_Exp1_clean_make
  #+begin_src makefile
Cascading_Exp1_clean:
	find . -maxdepth 1 -iname "Cascading_Exp1.py"   | xargs $(XARGS_OPT) rm
	find . -maxdepth 1 -iname "Cascading_Exp1.tex"   | xargs $(XARGS_OPT) rm
	find . -maxdepth 1 -iname "Cascading_Exp1_*"   | xargs $(XARGS_OPT) rm
	find . -maxdepth 1 -iname "Cascading_Exp1.mat"   | xargs $(XARGS_OPT) rm
  #+end_src
